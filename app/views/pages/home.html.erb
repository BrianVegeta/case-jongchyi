<style type="text/css">
  body {
    overflow: hidden;
  }
  .slide {
    height: 100%; 
    min-height: 100%;
    padding-top: 46px;
  }
  .slide-body
  {
    position: relative;
    height: 100%; 
    min-height: 480px;
  }
  .full-slide {
    position: relative;
    min-width: 1024px;
  }

  /* crafts */
  #crafts_bg {
    height: 100%; 
    min-height: 100%;
    background-image: url('<%= asset_path("noisy_grid.png") %>');
  }
  #crafts {
    /*background-color: : green;*/
  }
  #crafts .content {
    position: relative;
    top: 60%;
    left: 8%;
    width: 84%;
    margin-top: -18%;
  }
  #crafts .content .img-area {
    width: 70%;
  }
  #crafts .content .img-area img {
    width: 100%;
  }
  #crafts .content .text-area {
    position: absolute;
    top: -33%;
    left: 30%;
    width: 60%;
  }
  #crafts .content .measurement {
    position: absolute;
    top: 0%;
    font-size: 18px;
    left: 60%;
  }
  #crafts .content .measurement .number {
    font-size: 70px;
  }
  #crafts .content .measurement .unit {
    font-size: 36px;
  }

  /*tech*/
  #tech {
    background-image: url('<%= asset_path("old_mathematics.png") %>');
  }
  #tech .img-area {
    position: absolute;
    width: 30%;
  }
  #tech .img-area.right {
    top: 0;
    left: 70%;
  }
  #tech .img-area.left {
    top: 25%;
  }
  #tech .text-area {
    position: absolute;
    top: 50%;
    margin-top: -76px;
    left: 50%;
    margin-left: -147px;
  }
  #tech .measurement {
    position: absolute;
    font-size: 18px;
    color: #8F8080;
  }
  #tech .measurement .number {
    font-size: 44px;
  }
  #tech .measurement hr {
    border-top: 2px solid #8F8080;
    margin: 0;
  }
  #tech .measurement.sm {
    top: 45%;
    left: 80%;
    width: 75%;
    text-align: right;
  }
  #tech .measurement.lg {
    text-align: left;
    width: 60%;
    top: 32%;
    left: -40%;
  }

  /*quality*/
  #quality {
    background-image: url('<%= asset_path("quality_full.jpg") %>'); 
    background-size: 100%;
  }
  #quality .text-area {
    color: white;
    left: 20%;
    position: absolute;
    top: 25%;
  }

  /*research*/
  #research {
    background-color: #192635;
    background-image: url('<%= asset_path("blueprint.png") %>'); 
    color: white;
  }
  #research .img-area {
    position: absolute;
    width: 916px;
    margin-left: 39px;
    top: 13%;
  }
  #research .img-area img {
    width: 100%;
  }
  #research .text-area {
    position: absolute;
    width: 300px;
    margin-left: 268px;
    margin-top: 30px;
  }

  /*material*/
  #material_bg {
    background-image: url('<%= asset_path("cream_pixels.png") %>');
  }
  #material {
    padding-top: 120px;
  }
  #material .content {
    padding: 10px;
    width: 722px;
    margin-left: 147px;
    background-color: #FFFEF7;
    border-radius: 5px;
    border: 1px solid #ddd;
    box-shadow:4px 4px 3px rgba(20%,20%,40%,0.5);
  }
  #material .content .nav-tabs > li.active > a {
    background-color: #FFFEF7;
  }
  #material .content .img-area {
    display: block;
    width: 300px;    
    padding-top: 10px;
    padding-left: 25px;
    float: left;
  }
  #material .content .text-area {
    display: block;
    width: 400px;    
    padding-top: 10px;
    padding-left: 25px;
    padding-right: 25px;
    float: left;
  }
  #material .content .notice {
    margin-top: 200px;
    padding: 10px 25px;
  }
  #material .content .notice h3 small { 
    color: #979090;
  }

  /*support*/
  #support_bg {
    background-image: url('<%= asset_path("ricepaper.png") %>'); 
  }
  #support .content {
    width: 700px;
    margin-left: 147px;
    padding: 100px 40px;
  }
  #support .content .function {
    position: relative;
    width: 150px;
    height: 150px;
    margin-left: 43px;
    display: block;
    float: left;
    text-align: center;
  }
  #support .content .function img {
    border-radius: 75px;
    box-shadow:4px 4px 3px rgba(20%,20%,40%,0.5);
  }
  #support .content .function span {
    font-size: 36px;
    color: white;
    text-shadow: -1px 0 #dddddd, 0 2px #383838, 2px 0 #383838, 0 -1px #dddddd;
    position: absolute;
    top: 50%;
    margin-top: -25px;
    left: 50%;
    margin-left: -36px;
  }
  #support .content .contact {
    text-align: center;
    margin-top: 200px;
  }
  #support .content .btn {
    font-size: 36px; 
    width: 250px;
  }

  /*nav*/
  #progress-nav {
    position: fixed;
    z-index: 100;
    margin-top: -32px;
    right: 17px;
    top: 50%;
    opacity: 1;
  }
  #progress-nav ul {
    list-style: none outside;
  }
  #progress-nav ul a {
    color: black;
  }
  #progress-nav ul .hover-text {
    display: none;
    color: #373737;
  }
  #progress-nav i {
    font-size: 6px;
  }
  #progress-nav .inverse .hover-text {
    color: #dddddd;
  }

  /*media*/
  @media (max-width: 768px){
    .full-slide {
      min-width: 100%;
    }

    /* crafts */
    #crafts .content {
      top: 30%;
      left: 0;
      width: 100%;
      margin-top: 0%;
    }
    #crafts .content .img-area {
      width: 100%;
    }
    #crafts .content .text-area {
      top: -16%;
      left: 0;
      width: 100%;
      text-align: center;
    }
    #crafts .content .text-area p {
      font-size: 12px;
    }

    #crafts .content .measurement {
      top: 28%;
      font-size: 12px;
      left: 25%;
      text-align: center;
      width: 50%;
    }
    #crafts .content .measurement .number {
      font-size: 28px;
    }
    #crafts .content .measurement .unit {
      font-size: 14px;
    }

    /*tech*/
    #tech .img-area.left {
      top: 40%;
    }
    #tech .img-area.right {
      top: 12%;
    }
    #tech .measurement.lg {
      text-align: left;
      width: 135%;
      top: 8%;
      left: -75%;
    }
    #tech .measurement.sm {
      top: 45%;
      left: 78%;
      width: 150%;
      text-align: right;
    }
    #tech .measurement .number {
      font-size: 24px;
    }
    #tech .measurement p {
      font-size: 12px;
      margin-bottom: 0;
    }
    #tech .text-area {
      top: 40%;
      left: 20%;
      margin-left: 0; 
      width: 60%;
    }

    /*quality*/
    #quality {
      background-image: url('<%= asset_path("quality.jpg") %>'); 
      background-size: 100%;
    }
    #quality .text-area {
      left: 20%;
      top: 36%;
    }

    /*research*/
    #research .img-area {
      width: 80%;
      left: 10%;
      margin-left: 0;
    }
    #research .text-area {
      width: 80%;
      left: 10%;
      margin-left: 0;
      top: 45%;
      text-align: center;
    }

    /*material*/
    #material {
      padding: 60px 4px 0 4px;
    }
    #material .content {
      position: relative;
      width: 100%;
      left: 0;
      margin-left: 0;
      padding: 5px;
    }
    #material .content .img-area {
      padding: 5px 40px;
      display: block;
      margin: auto;
      width: 70%;
      float: none;
    }
    #material .content .text-area {
      padding: 0 10px;
      display: block;
      margin: auto;
      width: 100%;
      float: none;
    }
    #material .content .notice {
      padding: 0 10px 10px 10px;
      margin: 0 auto;
      width: 100%;
    }
    #material .content .notice h3{
      margin: 0;
      line-height: 0.5;
    }
    #material .content .notice h3 small {
      font-size: 12px;
    }
    #material .content .nav-tabs > li > a {
      padding: 4px;
      font-size: 19px;
    }

    /*support*/
    #support .content {
      width: 100%;
      margin: 0 auto;
      padding: 0;
    }
    #support .content .function {
      width: 28%;
      height: auto; 
      margin-left: 4%;
      margin-bottom: 20px;
      margin-top: 70px;
    }
    #support .content .function img {
      border-radius: 100px;
    }
    #support .content .function span {
      font-size: 26px;
      margin-left: -26px;
      margin-top: -18px;
    }
    #support .content a {
      text-decoration: none;
    }
    #support .content .contact {
      margin-top: 10px;
    }
    #support .content .btn {
      font-size: 26px; 
      width: 150px;
    }

    #progress-nav {
      visibility: hidden;
    }
  }

  @media (max-width: 460px) {
    .full-slide {
      min-width: 100%;
    }

    /* crafts */
    #crafts .content {
      top: 30%;
      left: 0;
      width: 100%;
      margin-top: 0%;
    }
    #crafts .content .img-area {
      width: 100%;
    }
    #crafts .content .text-area {
      top: -28%;
      left: 0;
      width: 100%;
      text-align: center;
    }
    #crafts .content .text-area p {
      font-size: 12px;
    }

    #crafts .content .measurement {
      top: 28%;
      font-size: 12px;
      left: 25%;
      text-align: center;
      width: 50%;
    }
    #crafts .content .measurement .number {
      font-size: 28px;
    }
    #crafts .content .measurement .unit {
      font-size: 14px;
    }

    /*tech*/
    #tech .img-area.left {
      top: 40%;
    }
    #tech .img-area.right {
      top: 12%;
    }
    #tech .measurement.lg {
      text-align: left;
      width: 135%;
      top: 8%;
      left: -75%;
    }
    #tech .measurement.sm {
      top: 45%;
      left: 78%;
      width: 150%;
      text-align: right;
    }
    #tech .measurement .number {
      font-size: 24px;
    }
    #tech .measurement p {
      font-size: 12px;
      margin-bottom: 0;
    }
    #tech .text-area {
      top: 40%;
      left: 20%;
      margin-left: 0; 
      width: 60%;
    }

    /*quality*/
    #quality {
      background-image: url('<%= asset_path("quality.jpg") %>'); 
      background-size: 100%;
    }
    #quality .text-area {
      left: 20%;
      top: 36%;
    }

    /*research*/
    #research .img-area {
      width: 80%;
      left: 10%;
      margin-left: 0;
    }
    #research .text-area {
      width: 80%;
      left: 10%;
      margin-left: 0;
      top: 45%;
      text-align: center;
    }

    /*material*/
    #material {
      padding: 60px 6px 0 6px;
    }
    #material .content {
      position: relative;
      width: 100%;
      left: 0;
      margin-left: 0;
      padding: 5px;
    }
    #material .content .img-area {
      padding: 5px 40px;
      display: block;
      margin: auto;
      width: 100%;
      float: none;
    }
    #material .content .text-area {
      padding: 0 10px;
      display: block;
      margin: auto;
      width: 100%;
      float: none;
    }
    #material .content .notice {
      padding: 0 10px 10px 10px;
      margin: 0 auto;
      width: 100%;
    }
    #material .content .notice h3{
      margin: 0;
      line-height: 0.5;
    }
    #material .content .notice h3 small {
      font-size: 12px;
    }
    #material .content .nav-tabs > li > a {
      padding: 3px;
      font-size: 12px;
    }

    /*support*/
    #support .content {
      width: 100%;
      margin: 0 auto;
      padding: 0;
    }
    #support .content .function {
      width: 28%;
      height: auto; 
      margin-left: 4%;
      margin-bottom: 20px;
      margin-top: 70px;
    }
    #support .content .function img {
      border-radius: 100px;
    }
    #support .content .function span {
      font-size: 26px;
      margin-left: -26px;
      margin-top: -18px;
    }
    #support .content a {
      text-decoration: none;
    }
    #support .content .contact {
      margin-top: 10px;
    }
    #support .content .btn {
      font-size: 26px; 
      width: 150px;
    }

    #progress-nav {
      visibility: hidden;
    }
  }  
</style>
<div id="crafts_bg" class="slide-body active">
  <div id="crafts" class="container slide">
    <div class="content">
      <div class="img-area">
        <%= image_tag('crafts.png') %>
      </div>
      <div class="text-area text-right">
        <div class="title">
          <h1><%= t('home_page.crafts.title') %></h1>
        </div>
        <div class="description">
          <p class="large">
            <%= t('home_page.crafts.content_1') %>
          </p>  
        </div>
      </div>
      <div class="measurement text-left">
        Waviness P <
        <span class="number">60</span>
        <span class="unit">nm</span>
      </div>  
    </div>
  </div>
</div>
<div class="slide-body">
  <div id="tech" class="slide full-slide">
    <div class="img-area left">
      <%= image_tag('tech_2.png') %>
      <div class="measurement sm">
        <p>
          <%= t('home_page.tech.radius') %>
          <span class="number">0.03</span>
          mm
        </p>
        <hr>
      </div>
    </div>
    <div class="img-area right">
      <%= image_tag('tech_1.png') %>
      <div class="measurement lg">
        <p>
          <%= t('home_page.tech.radius') %>
          <span class="number">1.0</span>
          mm
        </p>
        <hr>
      </div>
    </div>
    <div class="container">
      <div class="text-area">
        <h1><%= t('home_page.tech.title') %></h1>
        <p class="large">
          <%= t('home_page.tech.content_1') %><br><%= t('home_page.tech.content_2') %>
        </p>  
      </div>
    </div>
  </div>
</div>
<div class="slide-body">
  <div id="quality" class="slide full-slide">
    <div class="container">
      <div class="text-area">
        <h1><%= t('home_page.quality.title') %></h1>
        <br>
        <br>
        <p class="lead">
          <%= t('home_page.quality.content_1') %>
          <br>
          <%= t('home_page.quality.content_2') %>
          <br>
          <%= t('home_page.quality.content_3') %>
        </p>
      </div> 
    </div>
  </div>
</div>
<div class="slide-body">
  <div id="research" class="slide full-slide">
    <div class="container">
      <div class="img-area">
        <%= image_tag('research.png') %>
      </div>
      <div class="text-area">
        <h1><%= t('home_page.research.title') %></h1>
        <br>
        <p class="large">
          <%= t('home_page.research.content_1') %>
          <br>
          <%= t('home_page.research.content_2') %>
          <br>
          <%= t('home_page.research.content_3') %>
          <br>
          <%= t('home_page.research.content_4') %>
          <br>
          <%= t('home_page.research.content_5') %>
        </p>
      </div> 
    </div>
  </div>
</div>
<div id="material_bg" class="slide-body">
  <div id="material" class="container slide">
    <div class="content">
      <ul id="myTab" class="nav nav-tabs">
        <li class="active">
          <a href="#material_1" data-toggle="tab">
            <%= t('home_page.material.material_1.title') %>
          </a>
        </li>
        <li>
          <a href="#material_2" data-toggle="tab">
            <%= t('home_page.material.material_2.title') %>
          </a>
        </li>
        <li>
          <a href="#material_3" data-toggle="tab">
            <%= t('home_page.material.material_3.title') %>
          </a>
        </li>
        <li>
          <a href="#material_4" data-toggle="tab">
            <%= t('home_page.material.material_4.title') %>
          </a>
        </li>
      </ul>
      <div id="myTabContent" class="tab-content">
        <div class="tab-pane fade in active" id="material_1">
          <div class="img-area">
            <%= image_tag('material_1.jpg', class: 'img-rounded') %>
          </div>
          <div class="text-area">
            <p class="large">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <%= t('home_page.material.material_1.content') %>
            </p>
          </div>
        </div>
        <div class="tab-pane fade" id="material_2">
          <div class="img-area">
            <%= image_tag('material_2.jpg', class: 'img-rounded') %>
          </div>
          <div class="text-area">
            <p class="large">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <%= t('home_page.material.material_2.content') %>
              <br>
              <%= t('home_page.material.material_2.content_1') %>
              <ul>
                <li><%= t('home_page.material.material_2.content_2') %></li>
                <li><%= t('home_page.material.material_2.content_3') %></li>
              </ul>
            </p>
          </div>
        </div>
        <div class="tab-pane fade" id="material_3">
          <div class="img-area">
            <%= image_tag('material_3.jpg', class: 'img-rounded') %>
          </div>
          <div class="text-area">
            <p class="large">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <%= t('home_page.material.material_3.content') %>
            </p>
          </div>
        </div>
        <div class="tab-pane fade" id="material_4">
          <div class="img-area">
            <%= image_tag('material_4.jpg', class: 'img-rounded') %>
          </div>
          <div class="text-area">
            <p class="large">
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
              <%= t('home_page.material.material_4.content') %>
            </p>
          </div>
        </div>
      </div>
      <div class="notice">
        <h3><small><%= t('home_page.material.subscript') %></small></h3>
      </div>
    </div>
  </div>
</div>
<div id="support_bg" class="slide-body">
  <div id="support" class="container slide">
    <div class="content">
      <%= link_to support_path(anchor: :to_grinding), target: '_blank' do %>
        <div class="grinding function">
          <%= image_tag('grinding.jpg') %>
          <span><%= t('home_page.support.grinding') %></span>
        </div>
      <% end -%>
      <%= link_to support_path(anchor: :to_reform), target: '_blank' do %>
        <div class="reform function">
          <%= image_tag('reform.jpg') %>
          <span><%= t('home_page.support.reform') %></span>
        </div>
      <% end -%>
      <%= link_to support_path(anchor: :to_custom), target: '_blank' do %>
        <div class="custom function">
          <%= image_tag('custom.jpg') %>
          <span><%= t('home_page.support.custom') %></span>
        </div>
      <% end -%>
      <div class="contact">
        <%= link_to t('nav_contact'), contact_path, class: 'btn btn-warning btn-lg' %>
      </div>
    </div>
  </div>
</div>
<nav id="progress-nav">
  <ul>
    <li class="text-right">
      <span class="hover-text"><%= t('home_page.nav_progress.crafts') %></span> 
      <a class="crafts" href="#crafts"><i class="fa fa-circle"></i></a>
    </li>
    <li class="text-right">
      <span class="hover-text"><%= t('home_page.nav_progress.tech') %></span> 
      <a class="tech" href="#tech"><i class="fa fa-circle-o"></i></a>  
    </li>
    <li class="text-right">
      <span class="hover-text"><%= t('home_page.nav_progress.quality') %></span> 
      <a class="quality" href="#quality"><i class="fa fa-circle-o"></i></a>  
    </li>
    <li class="text-right">
      <span class="hover-text"><%= t('home_page.nav_progress.research') %></span> 
      <a class="research" href="#research"><i class="fa fa-circle-o"></i></a>
    </li>
    <li class="text-right">
      <span class="hover-text"><%= t('home_page.nav_progress.material') %></span> 
      <a class="material" href="#material"><i class="fa fa-circle-o"></i></a>
    </li>
    <li class="text-right">
      <span class="hover-text"><%= t('home_page.nav_progress.support') %></span> 
      <a class="support" href="#support"><i class="fa fa-circle-o"></i></a>
    </li>
  </ul>
</nav>

<script type="text/javascript">
$(function() {
    var animating_crafts = false;
    var animating_tech = false;
    function number_animate(start, end, $dom, add, f, animating, handle) {
      if (animating === false) {
        var id = setInterval(function() {
          animating = true;
          start = start + add;
          if (handle) {
            start = Math.floor(start * handle) / handle
          };
          if (add > 0) {
            if (start >= parseFloat(end)) {
              clearInterval(id);
              start = end;
            };
          } else {
            if (start <= parseFloat(end)) {
              clearInterval(id);
              animating = false;
              start = end;
            };
          };

          if (start.toString().length < end.toString().length) {
            $dom.html(start.toString() + '0');
          } else {
            $dom.html(start);
          }
        }, f);
      }
    }

    function animat_crafts() {
      var $crafts_number = $('#crafts').find('.measurement').find('.number');
      number_animate(100, 60, $crafts_number, -1, 30, animating_crafts);
    }

    function animat_tech_sm() {
      var $tech_number = $('#tech').find('.measurement.sm').find('.number');
      number_animate(0.6, 0.03, $tech_number, -0.01, 20, animating_tech, 100);
    }

    function slide() {
      var animating = false;
      $(window).on('mousewheel DOMMouseScroll', function(e){
        e.preventDefault();      
        if (animating) {
          return false;
        };
        var delta = e.originalEvent.detail < 0 || e.originalEvent.wheelDelta > 0 ? 1 : -1;
        //get the current active slide
        var $active = $('#slide_body > .active');

        if(delta < 0) { 
            //mousewheel down
            var $next = $active.next();
            //check if there's a next slide available
            if($next.length){
                animating = true;
                //animate scrolling to the next slides offset top
                $(window).unbind(); 
                $('body, html').stop(true).animate({scrollTop:$next.offset().top},'slow', function() {
                  setTimeout(function() {
                    slide();
                    animating = false;
                    $next.addClass('active').siblings().removeClass('active');
                  }, 500);
                });
            }

        }else{
            //mousewheel up
            var $prev = $active.prev();
            if($prev.length){
                animating = true;
                $(window).unbind();
                 //animate scrolling to the previous slides offset top
                $('body, html').stop(true).animate({scrollTop:$prev.offset().top},'slow', function() {
                  setTimeout(function() {
                    slide();
                    animating = false;
                    $prev.addClass('active').siblings().removeClass('active');
                  }, 500);
                });
            }
        }
      });  
    }
    animat_crafts();
    animat_tech_sm();
    slide();
    

    $(document).scroll(function() {
      check_slide_visible('crafts', 0, function() {
        animat_crafts();
        slide_active('crafts');
        active_progress('crafts');
      });
      check_slide_visible('tech', 0, function() {
        animat_tech_sm();
        slide_active('tech');
        active_progress('tech');
      });
      check_slide_visible('quality', 0, function() {
        slide_active('quality');
        active_progress('quality');
        inverse_progress();
      });
      check_slide_visible('research', 0, function() {
        slide_active('research');
        active_progress('research');
        inverse_progress();
      });
      check_slide_visible('material', 0, function() {
        slide_active('material');
        active_progress('material');
      });
      check_slide_visible('support', 0, function() {
        slide_active('support');
        active_progress('support');
      });
    })

    function slide_active(id) {
      $('.slide-body').removeClass('active')
      $('#' + id).parent().addClass('active');
    }

    function inverse_progress() {
      $('#progress-nav').find('i').addClass('fa-inverse');
      $('#progress-nav').find('li').addClass('inverse');
    }

    function active_progress(class_name) {
      $('#progress-nav').find('i').removeClass('fa-inverse');
      $('#progress-nav').find('i').removeClass('fa-circle').addClass('fa-circle-o');
      $('#progress-nav').find('.' + class_name).find('i').removeClass('fa-circle-o').addClass('fa-circle');
      $('#progress-nav').find('li').removeClass('inverse');
    }

    function check_slide_visible(id, top, callback) {
      var top_position = $('#' + id).offset().top - $(window).scrollTop();
      if (top_position >= top && top_position < $(window).height() / 2) {
        callback();
      };
    }
    
    $('#progress-nav').find('a').mouseover(function() {
      $(this).prev().show();
    });
    $('#progress-nav').find('a').mouseout(function() {
      $(this).prev().hide();
    });
    
    
  });

if ($.browser.chrome) {
  $('#progress-nav i').css({'-webkit-transform' : 'scale(0.5)'});
};
</script>