<%= form_for [:admin, @product], :html => { :role => "form", autocomplete: 'off' } do |f| %>
  <%= f.hidden_field :photo_id %>
  <div class="form-group">
    <%= f.label :'選擇分類', class: "col-sm-2 control-label" %>
    <div class="row">
      <div class="col-sm-6">
        <select class="form-control" name="product[category]">
          <% Product.sub_cates.each do |cate_id, cates| %>
            <optgroup label="<%= Product.cates[cate_id] %>">
              <% cates.each do |sub_id, cate| %>
                <option value="<%= sub_id %>" <%= @product.category == sub_id ? 'selected' : '' %>><%= cate.split('&nbsp;').first %></option>
              <% end %>
            </optgroup>
          <% end %>
        </select>
      </div>
    </div>
  </div>
  <ul id="myTab" class="nav nav-tabs">
    <li class="active"><a href="#zh-TW" data-toggle="tab">繁體</a></li>
    <li class=""><a href="#zh-CN" data-toggle="tab">簡體</a></li>
  </ul>
  <div id="myTabContent" class="tab-content">
    <div class="tab-pane fade active in" id="zh-TW">

      <div class="form-group">
        <%= f.label :'標題' %>
        <div class="row">
          <div class="col-sm-12">
            <%= f.text_field :title, :autofocus => true, class: "form-control" %>  
          </div>
        </div>
      </div>

      <div class="form-group">
        <%= f.label :'內容' %>
        <div class="row">
          <div class="col-sm-12">
            <%= f.text_area :content, :class => 'ckeditor' %>
          </div>
        </div>
      </div>

    </div>
    <div class="tab-pane fade" id="zh-CN">

      <div class="form-group">
        <%= f.label :'標題(簡體)' %>
        <div class="row">
          <div class="col-sm-12">
            <%= f.text_field :zh_cn_title, :autofocus => true, class: "form-control" %>  
          </div>
        </div>
      </div>

      <div class="form-group">
        <%= f.label :'內容(簡體)' %>
        <div class="row">
          <div class="col-sm-12">
            <%= f.text_area :zh_cn_content, :class => 'ckeditor2' %>
          </div>
        </div>
      </div>

    </div>
  </div>

    <div class="row">
      <div class="col-sm-6">
        <%= f.submit "確定送出", class: "btn btn-primary" %>
      </div>
    </div>    
<% end %>
<script type="text/javascript">
  $('.ckeditor').ckeditor({
    height: 280,
    toolbar: [
      { name: 'clipboard', groups: [ 'clipboard', 'undo' ], items: [ 'Cut', 'Copy', 'Paste', '-', 'Undo', 'Redo' ] },
      { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ] },
      { name: 'insert', items: [ 'Table'] },
      { name: 'colors', items: [ 'TextColor', 'BGColor' ] },
      { name: 'styles', items: [ 'Styles', 'Format', 'Font', 'FontSize' ] },
      { name: 'tools', items: [ 'Maximize'] },
      { name: 'links', items: [ 'Link', 'Unlink', 'Anchor' ] }
    ]
  });
  $('.ckeditor2').ckeditor({
    height: 280,
    toolbar: [
      { name: 'clipboard', groups: [ 'clipboard', 'undo' ], items: [ 'Cut', 'Copy', 'Paste', '-', 'Undo', 'Redo' ] },
      { name: 'basicstyles', groups: [ 'basicstyles', 'cleanup' ], items: [ 'Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ] },
      { name: 'insert', items: [ 'Table'] },
      { name: 'colors', items: [ 'TextColor', 'BGColor' ] },
      { name: 'styles', items: [ 'Styles', 'Format', 'Font', 'FontSize' ] },
      { name: 'tools', items: [ 'Maximize'] },
      { name: 'links', items: [ 'Link', 'Unlink', 'Anchor' ] }
    ]
  });
</script>